.\" Automatically generated by Pandoc 2.14.0.2
.\"
.TH "kpxhs" "1" "" "Version 1.7" "kpxhs manual"
.hy
.SH NAME
.PP
\f[B]kpxhs\f[R] - Interactive Keepass database TUI viewer
.SH SYNOPSIS
.PP
\f[B]kpxhs\f[R] [-h | --help] [-v | --version] [--write-config]
.SH DESCRIPTION
.PP
Interactive Keepass (https://keepass.info/) database TUI viewer.
The database and keyfile path can be configured to auto-fill on launch.
Entry details can be viewed and their username and password fields can
be copied to clipboard.
On exit, if the clipboard is \[lq]dirty\[rq] then it will offer to clear
it.
The clipboard can also be cleared after a configurable timeout, along
with a progress bar that counts down to clear.
.SH OPTIONS
.TP
\f[B]\f[CB]h, help\f[B]\f[R]
Prints the help message and exit.
Ignores number of dashes.
.TP
\f[B]\f[CB]v, version\f[B]\f[R]
Prints the version number and exit.
Ignores number of dashes.
.TP
\f[B]\f[CB]write-config\f[B]\f[R]
Writes the default config.hs and theme.hs files to \[ti]/.config/kpxhs/.
Ignores number of dashes.
.SH KEYBINDINGS
.TP
\f[B]\f[CB]Esc\f[B]\f[R]
Go up a directory, or attempt to quit if in root directory.
If in entry details view, go back to browser
.TP
\f[B]\f[CB]Tab, Ctrl-Tab\f[B]\f[R]
Cycle focus between elements (eg: list and search bar; login fields;
exit dialog)
.TP
\f[B]\f[CB]Enter\f[B]\f[R]
Show entry details of selected entry.
Attempts login if locked
.TP
\f[B]\f[CB]u\f[B]\f[R]
Copy username of selected/current entry
.TP
\f[B]\f[CB]p\f[B]\f[R]
Copy password of selected/current entry
.TP
\f[B]\f[CB][n]j, [n]s\f[B]\f[R]
Move down the list by \[ga]n\[ga] items, default is 1.
\[ga]n\[ga] is an optional series of digits (0-9), that terminates when
\[ga]j\[ga] or \[ga]s\[ga] is pressed.
This resembles the vim motion commands.
Leading zeros are stripped.
For example, \[ga]4j\[ga] will move four items down and \[ga]10j\[ga]
will move ten items down.
Use the relative line numbers to help; the number shown is the exact
number needed for the digit \[ga]n\[ga]
.TP
\f[B]\f[CB][n]k, [n]w\f[B]\f[R]
Move up the list by \[ga]n\[ga] items, default is 1.
\[ga]n\[ga] is an optional series of digits (0-9), that terminates when
\[ga]k\[ga] or \[ga]w\[ga] is pressed.
Leading zeros are stripped.
This resembles the vim motion commands.
For example, \[ga]4k\[ga] will move four items down and \[ga]10k\[ga]
will move ten items down.
Use the relative line numbers to help; the number shown is the exact
number needed for the digit \[ga]n\[ga]
.TP
\f[B]\f[CB]g\f[B]\f[R]
Move to the top of the list
.TP
\f[B]\f[CB]G\f[B]\f[R]
Move to the bottom of the list
.TP
\f[B]\f[CB]q\f[B]\f[R]
Move 5 items up the list
.TP
\f[B]\f[CB]e\f[B]\f[R]
Move 5 items down the list
.SH EXAMPLE USAGE
.IP "1." 3
\[ga]kpxhs\[ga]
.IP "2." 3
\[ga]YOUR_PASSWORD\[ga] (Assuming database path stored in config and no
keyfile)
.IP "3." 3
(Focus is on search bar by default) \[ga]git\[ga] (List filtered to
items with \[lq]git\[rq] in title)
.IP "4." 3
\[ga]Tab\[ga] (Focus to list)
.IP "5." 3
\[ga]j\[ga] (Focus one entry below)
.IP "6." 3
\[ga]p\[ga] (Copy password)
.IP "7." 3
\[ga]Esc\[ga] (quit)
.IP "8." 3
(Focus is on clear clipboard and exit by default) \[ga]Enter\[ga] (clear
clipboard and exit)
.SH CONFIGURATION
.SS GENERAL
.PP
The only contents of the file is the single expression; assignments,
imports, statements, and comments are not allowed.
You cannot use \[ga]$\[ga] to replace parenthesis, because no arbitrary
functions are evaluated.
Whitespace and newline rules follow normal Haskell rules for
expressions.
The config and theme files are not valid Haskell modules that can be
compiled; they are interpreted at launch.
.PP
The records must match their specified number of fields; omission or
addition of any fields will result in an invalid config, and the default
will be used instead.
.PP
Type constructors must be written verbatim with no changes in
capitalization.
They include: \[ga]Just\[ga], \[ga]Nothing\[ga], \[ga]Seconds\[ga],
\[ga]DoNotClear\[ga], all the color names (eg, \[ga]Red\[ga]), and all
the style names (eg, \[ga]Bold\[ga])
.PP
Hint: run \[ga]kpxhs \[en]write-config\[ga] to generate the default
config and theme for further editing
.SS SETTINGS
.PP
You can fill your database path in using a config file, so you only need
to enter your password upon running.
This is how keepassxc works by default.
The paths can be any UTF-8 string; no validation is performed on them.
.PP
The config file is located in \[ga]\[ti]/.config/kpxhs/config.hs\[ga].
Make sure it is encoded as UTF-8.
Write something like:
.IP
.nf
\f[C]
Config { timeout = Just (Seconds 10)
       , dbPath = Just \[dq]/home/me/kpxhs/test/kpxhs_test.kdbx\[dq]
       , keyfilePath = Just \[dq]/home/me/kpxhs/test/keyfile.key\[dq]
       }
\f[R]
.fi
.PP
\f[B]It must be a valid Haskell expression\f[R] of a record with three
fields: timeout, dbPath, and keyfilePath.
All three are Maybe types - they are optional and you can always omit
specifying them by writing \[ga]Nothing\[ga].
Do not delete a field however, as it will result in an invalid config.
.SS timeout
.PP
After copying a username or password, \f[I]kpxhs\f[R] can automatically
clear the clipboard after a set number of seconds.
There are three valid values for the timeout field:
.TP
\f[B]\f[CB]Just (Seconds t)\f[B]\f[R]
Set the number of seconds to wait before clearing the clipboard to
\[ga]t\[ga] seconds.
The number of seconds must be an integer.
.TP
\f[B]\f[CB]Just DoNotClear\f[B]\f[R]
Disable automatic clipboard clearing.
.TP
\f[B]\f[CB]Nothing\f[B]\f[R]
Fall back to the default, which is \f[B]10 seconds\f[R]
.SS dbPath
.PP
\f[I]kpxhs\f[R] can auto-fill the database path with a given string.
There are two valid values:
.TP
\f[B]\f[CB]Just \[dq]xxx\[dq]\f[B]\f[R]
Fill in the database path with the string \[lq]xxx\[rq], without quotes.
.TP
\f[B]\f[CB]Nothing\f[B]\f[R]
Fall back to the default, which is the empty string \[lq]\[rq]
.SS keyfilePath
.PP
\f[I]kpxhs\f[R] can auto-fill the keyfile path with a given string.
There are two valid values:
.TP
\f[B]\f[CB]Just \[dq]xxx\[dq]\f[B]\f[R]
Fill in the keyfile path with the string \[lq]xxx\[rq], without quotes.
.TP
\f[B]\f[CB]Nothing\f[B]\f[R]
Fall back to the default, which is the empty string \[lq]\[rq]
.SS THEMING
.PP
The theme file is located in \[ga]\[ti]/.config/kpxhs/theme.hs\[ga].
Make sure it is encoded as UTF-8.
You should probably edit the default theme instead of writing from
scratch, because if you write from scratch, all the colors in the
default theme are lost.
.PP
This is the default theme if you don\[cq]t provide any:
.IP
.nf
\f[C]
[ (Name [\[dq]list\[dq],\[dq]selected\[dq]],   Val { fg = Red,   bg = Def,    styles = [] } )
, (Name [\[dq]edit\[dq]],              Val { fg = Black, bg = White,  styles = [] } )
, (Name [\[dq]edit\[dq],\[dq]focused\[dq]],    Val { fg = White, bg = Blue,   styles = [] } )
, (Name [\[dq]dialog\[dq]],            Val { fg = White, bg = Blue,   styles = [] } )
, (Name [\[dq]button\[dq]],            Val { fg = Black, bg = White,  styles = [] } )
, (Name [\[dq]button\[dq],\[dq]selected\[dq]], Val { fg = Def,   bg = Yellow, styles = [] } )
, (Name [\[dq]kpxhs\[dq],\[dq]key\[dq]],       Val { fg = Def,   bg = White,  styles = [] } )
, (Name [\[dq]kpxhs\[dq],\[dq]label\[dq]],     Val { fg = Black, bg = Def,    styles = [] } )
, (Name [\[dq]progressComplete\[dq]],  Val { fg = White, bg = Blue,   styles = [] } )
]
\f[R]
.fi
.PP
\f[B]The theme file must be a valid Haskell expression\f[R].
It is a list-of-2-tuples, where the first item is an attribute name made
of a list-of-strings, and the second item is a record with three fields:
fg, bg, and styles.
fg and bg are of type Color, while styles is a list-of-styles
.SS Attribute names
.TP
\f[B]\f[CB]Name xs\f[B]\f[R]
Constructs an attribute name using the list-of-strings xs.
.PP
There are also two special attribute names exclusive to \f[I]kpxhs\f[R].
They are appropriately namespaced with \[ga]\[lq]kpxhs\[rq]\[ga].
.TP
\f[B]\f[CB]Name [\[dq]kpxhs\[dq], \[dq]key\[dq]]\f[B]\f[R]
The style of the key being bound (eg, \[lq]Esc\[rq])
.TP
\f[B]\f[CB]Name [\[dq]kpxhs\[dq], \[dq]label\[dq]]\f[B]\f[R]
The style of the label bound (eg, \[lq]exit\[rq])
.PP
In other words, the footer shows a nano-like grid of keys and their
action.
For example, \[lq]Esc exit\[rq] to indicate that pressing the Esc key
will exit.
\[ga]kpxhs.key\[ga] would style the \[lq]Esc\[rq] text and
\[ga]kpxhs.label\[ga] would style the \[lq]exit\[rq] text
.PP
Apart from those two, you can use any other attribute name of elements
used in the program.
Here are the Brick docs for the attribute names of the elements used in
\f[I]kpxhs\f[R]:
.IP \[bu] 2
List
widget (https://hackage.haskell.org/package/brick-0.64/docs/Brick-Widgets-List.html#g:7)
.IP \[bu] 2
Exit
dialog (https://hackage.haskell.org/package/brick-0.64/docs/Brick-Widgets-Dialog.html#g:4)
.IP \[bu] 2
Login
dialog (https://hackage.haskell.org/package/brick-0.64/docs/Brick-Widgets-Edit.html#g:7)
.IP \[bu] 2
Progress
bar (https://hackage.haskell.org/package/brick-0.64/docs/Brick-Widgets-ProgressBar.html#g:1)
.IP \[bu] 2
Borders (https://hackage.haskell.org/package/brick-0.64/docs/Brick-Widgets-Border.html#g:5)
.SS Attribute values
.PP
The record has three fields:
.TP
\f[B]\f[CB]fg\f[B]\f[R]
Set the foreground color.
See \f[B]Colors\f[R]
.TP
\f[B]\f[CB]bg\f[B]\f[R]
Set the background color.
See \f[B]Colors\f[R]
.TP
\f[B]\f[CB]styles\f[B]\f[R]
Set the given styles.
See \f[B]Styles\f[R]
.SS Colors
.TP
\f[B]\f[CB]Black, Red, Green, Yellow, Blue, Magenta, Cyan, White, BrightBlack, BrightRed, BrightGreen, BrightYellow, BrightBlue, BrightMagenta, BrightCyan, BrightWhite\f[B]\f[R]
Uses the 16 colors configured through your terminal
.TP
\f[B]\f[CB]Def\f[B]\f[R]
Use the default color for that element
.TP
\f[B]\f[CB]RGB r g b\f[B]\f[R]
Use an RGB color given by the three integers, from 0 to 255 inclusive.
Note that it doesn\[cq]t support the entire rgb palette, so some colors
can throw an error.
\f[I]kpxhs\f[R] allows it to be thrown, because some attributes might be
a hassle to navigate to, so aborting the program will let the user know
their color is invalid as early as possible.
.SS Styles
.TP
\f[B]\f[CB]Standout, Underline, ReverseVideo, Blink, Dim, Bold, Italic, Strikethrough\f[B]\f[R]
Formats the text with the given style
.PP
If you don\[cq]t want to specify a style, leave the list empty.
.SS Theme examples
.IP "0." 3
Set the text of \[ga]kpxhs.key\[ga] to bold
.IP
.nf
\f[C]
, (Name [\[dq]kpxhs\[dq],\[dq]key\[dq]],       Val { fg = Def,   bg = Def,  styles = [Bold] } )
\f[R]
.fi
.IP "1." 3
Set the background color of \[ga]kpxhs.key\[ga] to red
.IP
.nf
\f[C]
, (Name [\[dq]kpxhs\[dq],\[dq]key\[dq]],       Val { fg = Def,   bg = Red,  styles = [] } )
\f[R]
.fi
.IP "2." 3
Set the background color of \[ga]kpxhs.key\[ga] to red and make it bold
.IP
.nf
\f[C]
, (Name [\[dq]kpxhs\[dq],\[dq]key\[dq]],       Val { fg = Def,   bg = Red,  styles = [Bold] } )
\f[R]
.fi
.IP "3." 3
Set the background color of \[ga]kpxhs.key\[ga] to red and make it
bold-italic
.IP
.nf
\f[C]
, (Name [\[dq]kpxhs\[dq],\[dq]key\[dq]],       Val { fg = Def,   bg = Red,  styles = [Bold, Italic] } )
\f[R]
.fi
.IP "4." 3
Set the background color of \[ga]kpxhs.key\[ga] to red, the foreground
color to RGB(51, 187, 204) and make it bold-italic
.IP
.nf
\f[C]
, (Name [\[dq]kpxhs\[dq],\[dq]key\[dq]],       Val { fg = RGB 51 187 204,   bg = Red,  styles = [Bold, Italic] } )
\f[R]
.fi
.SH ENVIRONMENT
.PP
Requires keepassxc (https://github.com/keepassxreboot/keepassxc/)
installed with \[ga]keepassxc-cli\[ga] in PATH.
# FILES
.TP
\f[B]\f[CB]Configuration\f[B]\f[R]
\[ga]\[ti]/.config/kpxhs/config.hs\[ga]
.TP
\f[B]\f[CB]Theme\f[B]\f[R]
\[ga]\[ti]/.config/kpxhs/theme.hs\[ga]
.SH BUGS
.PP
The issue tracker and repo is in: <https://github.com/twenty5151/kpxhs>
.SH LICENSE
.PP
GPLv3 or later
.SH SEE ALSO
.PP
keepassxc-cli(1)
